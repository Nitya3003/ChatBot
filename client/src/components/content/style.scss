@import '../../index.scss';

@keyframes txtBlink {
    0% {
        border-right: 4px solid;
    }

    50% {
        border-right: none;
    }

    100% {
        border-right: 4px solid;
    }
}

.light {
    .New {
        .card-bg {
            background: rgba(247, 247, 248, 1);
            border-radius: .375rem;
            padding: .75rem;

            p {
                font-size: 14px;
            }

            &:is(.hover):hover {
                background: rgba(236, 236, 241, 1);
                cursor: pointer;
            }
        }
    }

    .Chat {
        .message-bubble {
            &.user-bubble {
                background: rgba(139, 92, 246, 0.1);
                border: 1px solid rgba(139, 92, 246, 0.3);
                color: #343541;
            }

            &.ai-bubble {
                background: rgba(247, 247, 248, 1);
                border: 2px solid rgba(139, 92, 246, 0.5);
                color: #374151;
            }
        }

        .message-content {
            color: inherit;

            span {
                color: inherit;

                &:is(.blink)::after {
                    border-color: inherit;
                }
            }

            .error {
                color: #374151;
            }
        }

        .message-timestamp {
            color: #6b7280;
        }
    }
}

.dark {
    .New {
        .card-bg {
            background: rgba(139, 92, 246, 0.05);
            border-radius: .375rem;
            padding: .75rem;

            p {
                font-size: 14px;
            }

            &:is(.hover):hover {
                background: rgba(139, 92, 246, 0.1);
                cursor: pointer;
            }
        }
    }

    .Chat {
        .message-bubble {
            &.user-bubble {
                background: rgba(139, 92, 246, 0.15);
                border: 1px solid rgba(139, 92, 246, 0.4);
                color: #ECECF1;
            }

            &.ai-bubble {
                background: rgba(42, 42, 62, 0.5);
                border: 2px solid rgba(139, 92, 246, 0.6);
                color: #D1D5DB;
            }
        }

        .message-content {
            color: inherit;

            span {
                color: inherit;

                &:is(.blink)::after {
                    border-color: inherit;
                }
            }

            .error {
                color: #D1D5DB;
            }
        }

        .message-timestamp {
            color: rgba(209, 213, 219, 0.7);
        }
    }
}

.New {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: calc(100vh - 200px);
    padding: 2rem;

    .logo-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
        margin-bottom: 3rem;

        .logo-container {
            .logo-square {
                width: 64px;
                height: 64px;
                background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);

                svg {
                    width: 32px;
                    height: 32px;
                }
            }
        }

        .title-section {
            text-align: center;

            .title {
                font-size: 2rem;
                font-weight: 700;
                margin: 0;
                margin-bottom: 0.5rem;
                background: linear-gradient(135deg, #ffffff 0%, rgba(255, 255, 255, 0.8) 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .subtitle {
                font-size: 0.875rem;
                color: rgba(255, 255, 255, 0.6);
                margin: 0;
            }
        }
    }

    .prompt-text {
        h2 {
            font-size: 1.5rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.9);
            margin: 0;
        }
    }

    .flex {
        display: flex;
        flex-direction: row;
        gap: .875rem;

        @media screen and (max-width:767px) {
            flex-direction: column;
        }

        svg {
            width: 24px;
            height: 24px;
        }

        .inner {
            flex-basis: 100%;
            display: flex;
            flex-direction: column;

            @media screen and (max-width:767px) {
                flex-basis: 100%;
            }

            .card {
                margin-bottom: 1em;

                h4 {
                    font-weight: 400;
                    font-size: 1.125rem;
                    line-height: 1.75rem;
                }
            }
        }

    }
}

.Chat {
    display: flex;
    flex-direction: column;
    padding: 2rem 0;
    padding-bottom: 12rem;
    max-width: 100%;
    margin: 0 auto;

    @media only screen and (max-width: 1300px) {
        padding-left: 2rem;
        padding-right: 2rem;
    }

    @media only screen and (max-width: 1000px) {
        padding-left: 1rem;
        padding-right: 1rem;
    }

    @media only screen and (max-width: 767px) {
        padding-top: 4rem;
    }

    .message-wrapper {
        display: flex;
        align-items: flex-start;
        margin-bottom: 1.5rem;
        gap: 0.75rem;
        max-width: 100%;

        &.user-message {
            justify-content: flex-end;
            padding-left: 10em;
            padding-right: 2em;

            @media only screen and (max-width: 1300px) {
                padding-left: 5em;
                padding-right: 1em;
            }

            @media only screen and (max-width: 1000px) {
                padding-left: 2em;
                padding-right: 1em;
            }

            @media only screen and (max-width: 767px) {
                padding-left: 1em;
                padding-right: 1em;
            }
        }

        &.ai-message {
            justify-content: flex-start;
            padding-left: 2em;
            padding-right: 10em;

            @media only screen and (max-width: 1300px) {
                padding-left: 1em;
                padding-right: 5em;
            }

            @media only screen and (max-width: 1000px) {
                padding-left: 1em;
                padding-right: 2em;
            }

            @media only screen and (max-width: 767px) {
                padding-left: 1em;
                padding-right: 1em;
            }
        }
    }

    .message-avatar {
        flex-shrink: 0;
        width: 32px;
        height: 32px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;

        &.user-avatar {
            order: 2;
            background: rgba(139, 92, 246, 0.2);
            color: rgba(139, 92, 246, 1);

            svg {
                width: 20px;
                height: 20px;
            }
        }

        &.ai-avatar {
            order: 1;
            position: relative;
            background: rgb(16, 163, 127);
            color: white;

            svg {
                width: 20px;
                height: 20px;
            }

            .error-badge {
                position: absolute;
                background: rgba(239, 68, 68, 1);
                border-radius: 50%;
                font-size: 10px;
                width: 1rem;
                height: 1rem;
                display: flex;
                align-items: center;
                justify-content: center;
                right: -4px;
                bottom: -4px;
                color: rgba(255, 255, 255, 1);
                border: 1px solid rgba(255, 255, 255, 1);
            }
        }
    }

    .message-bubble {
        max-width: 70%;
        border-radius: 12px;
        padding: 1rem 1.25rem;
        position: relative;

        @media only screen and (max-width: 767px) {
            max-width: 85%;
        }

        &.user-bubble {
            order: 1;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            text-align: right;
        }

        &.ai-bubble {
            order: 2;
            background: transparent;
            border: 2px solid rgba(139, 92, 246, 0.5);
            text-align: left;
        }
    }

    .message-content {
        line-height: 1.6;
        font-size: 1rem;
        word-wrap: break-word;
        white-space: pre-wrap;

        span {
            display: block;
            line-height: 1.6;
            font-size: 1rem;
            white-space: pre-wrap;

            &:is(.blink) {
                &::after {
                    content: '';
                    padding-left: 3px;
                    border-right: 4px solid;
                    animation: txtBlink 1s ease-in-out infinite;
                }
            }
        }

        .error {
            background: rgba(239, 68, 68, .1);
            border: 1px solid rgba(239, 68, 68, 1);
            border-radius: .375rem;
            padding: 0.75rem;
            font-size: .875rem;
            line-height: 1.25rem;
        }
    }

    .message-timestamp {
        font-size: 0.75rem;
        opacity: 0.7;
        margin-top: 0.5rem;
        text-align: right;
    }
}